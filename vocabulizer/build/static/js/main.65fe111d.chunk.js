(this["webpackJsonpvocabulizer-frontend"]=this["webpackJsonpvocabulizer-frontend"]||[]).push([[0],{33:function(e,t,n){e.exports=n(45)},38:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(30),o=n.n(c),i=(n(38),n(12)),u=n.n(i),s=n(18),d=n(13),l=n(27),f=n(5),b=n(55),O=n(31),j=n(49),m=n(58),h=n(59),p=n(56),v=n(32),g=n(48),y=n(50),w=n(51),S=n(52),E=n(53),k=n(62),W=n(60),N=n(61),x=function(e,t,n){var r=""!==t?[e,t].join("__"):e;return"".concat(r," ").concat(n.reduce((function(e,t){return"".concat(e," ").concat(r).concat("--").concat(t)}),""))},T=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return n="string"===typeof t?n:t||[],x(e,"string"===typeof t?t:"",Array.isArray(n)?n.filter(Boolean):Object.entries(n).filter((function(e){var t=Object(f.a)(e,2)[1];return Boolean(t)})).map((function(e){return Object(f.a)(e,1)[0]})))}},A=n(54),_=n(47),C=n(57),M=Object(O.a)((function(e,t){return Object(p.a)(e)?[t]:Object(A.a)(Object(_.a)(e),function(e,t){var n=e.start,r=e.end,a=t.start,c=t.end;return r<a?[e,t]:c<n?[t,e]:n<=a&&r>=c?[e]:a<=n&&c>=r?[t]:n<=a&&r<=c?[{start:e.start,end:t.end}]:a<=n&&c<=r?[{start:t.start,end:e.end}]:[e,t]}(Object(C.a)(e),t))}),[]),I=(n(40),T("Word")),J=function(e){var t=e.word,n=e.selected,r=e.onSelect,c=e.onMarkAsKnown;return a.a.createElement("span",{className:I({selected:n}),onClick:function(){return null===r||void 0===r?void 0:r(t)}},t.dictionaryWord,a.a.createElement("sub",{className:I("count")},t.entriesInSrc.length),a.a.createElement("button",{className:I("close"),onClick:function(e){e.stopPropagation(),null===c||void 0===c||c(t)}},"x"))},B=(n(41),T("Dictionary")),K=function(e){var t=e.dictionary,n=e.selectedWords,c=e.onSelectWord,o=e.onMarkAsKnown;return a.a.createElement("div",{className:B()},t.filter((function(e){return!e.known})).map((function(e){return{word:e,selected:Object(g.a)(e.dictionaryWord,n)}})).sort((function(e,t){return Number(e.selected)-Number(t.selected)})).map((function(e){var t=e.word,n=e.selected;return a.a.createElement(r.Fragment,{key:"".concat(t.dictionaryWord,"_").concat(t.partOfSpeechTag,"_").concat(t.entriesInSrc.length)},a.a.createElement(J,{selected:n,word:t,onSelect:function(e){return null===c||void 0===c?void 0:c(e,n)},onMarkAsKnown:function(e){return null===o||void 0===o?void 0:o(e,"reading")}})," ")})))},P=n(22),z=(n(42),T("Highlighter")),D=function(e){var t=e.highlighters,n=e.text,c=Object(r.useMemo)((function(){return function(e,t){var n;if(Object(p.a)(t))return[[e,!1]];var r=Object(m.a)(Object(h.a)((function(e){return[e.start,e.end]}),t)),a=Object(O.a)((function(t,n){var r=Object(f.a)(t,3),a=r[0],c=r[1],o=r[2];return[Object(W.a)([Object(P.a)(c,n,e),o],a),n,!o]}),[[],0,!1],r);return Object(W.a)([Object(P.a)(null!==(n=Object(C.a)(r))&&void 0!==n?n:e.length,e.length,e),!1],a[0])}(n,t)}),[t,n]);return a.a.createElement("span",{className:z()},c.map((function(e,t){var n=Object(f.a)(e,2),r=n[0],c=n[1];return a.a.createElement("span",{key:"".concat(t,"____").concat(r),className:z("item",{active:c})},r)})))},F=(n(43),T("TextArea")),H=function(e){var t=e.children,n=e.onChange,c=Object(r.useState)(""),o=Object(f.a)(c,2),i=o[0],u=o[1];return Object(r.useEffect)((function(){u(e.value)}),[e.value]),Object(r.useEffect)((function(){null===n||void 0===n||n(i)}),[i,n]),a.a.createElement("div",{className:F()},a.a.createElement("textarea",{onInput:function(e){return u(e.currentTarget.value)},className:F("input"),defaultValue:i}),a.a.createElement("div",{className:F("input-highlighter")},t(i)))},V=(n(44),T("App")),$=a.a.memo((function(){var e=Object(r.useState)(""),t=Object(f.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)([]),i=Object(f.a)(o,2),x=i[0],T=i[1];Object(N.a)(Object(l.a)(u.a.mark((function e(){var t,r,a,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/get-dictionary-from-src",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({src:n})});case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,a=r.data.words,c=r.meta.entries,o=Object(b.a)(Object(O.a)((function(e,t){return Object(d.a)(Object(d.a)({},e),{},Object(s.a)({},t.word,t.entries))}),{}),Object(j.a)(m.a))(c),T(Object(h.a)((function(e){return Object(d.a)(Object(d.a)({known:!1},e),{},{entriesInSrc:o[e.dictionaryWord]})}))(a));case 10:case"end":return e.stop()}}),e)}))),500,[n]),Object(r.useEffect)((function(){fetch("/text-to-read").then((function(e){return e.json()})).then((function(e){var t=e.src;return c(t)}))}),[]);var A=Object(r.useState)([]),_=Object(f.a)(A,2),C=_[0],I=_[1],J=Object(r.useMemo)((function(){return Object(p.a)(C)?[]:Object(b.a)((function(e){return Object(v.a)((function(t){return!t.known&&Object(g.a)(t.dictionaryWord,e)}),x)}),Object(h.a)((function(e){return e.entriesInSrc})),m.a,Object(y.a)((function(e,t){return e.start-t.start})),M)(C)}),[C,x]),B=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dictionaryWord,a=t.partOfSpeechTag,T(Object(h.a)(Object(w.a)(Object(S.a)("dictionaryWord",r),Object(E.a)("known",!0)))(x)),e.next=4,fetch("/add-known-word",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dictionaryWord:r,partOfSpeechTag:a,source:n})});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(l.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n?Object(k.a)([t.dictionaryWord],C):Object(W.a)(t.dictionaryWord,C),I(r),e.next=4,fetch("/add-to-memorise",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(d.a)(Object(d.a)({},t),{},{highlighted:n}))});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return a.a.createElement("div",{className:V()},a.a.createElement(H,{value:n,onChange:c},(function(e){return a.a.createElement(D,{text:e,highlighters:J})})),x&&a.a.createElement(K,{selectedWords:C,dictionary:x,onSelectWord:P,onMarkAsKnown:B}))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.65fe111d.chunk.js.map